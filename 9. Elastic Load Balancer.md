# 로드밸런싱

ELB : 애플리케이션 트래픽을 EC2 인스턴스, 컨테이너, IP주소, Lambda함수와 같은 여러 대상에 자동으로 분산시킴.

EC2는 작은 인스턴스를 여러개 배치하는 방향으로 가는데..

이런 인스턴스 각각에 접근하기 위해서는 인스턴스의 IP주소를 모두 알고 있어야 함.

이런 문제점을 해결하기 위해 존재하는게 ELB!

> 트래픽을 하나의 경로로 받아서 분산해주는 시스템

- 인스턴스 하나가 중지되거나 에러가 나면 자동으로 트래픽을 보내지 않는 식으로 간편하게 구성 가능.

- 다수의 서비스에 트래픽을 분산 시켜주는 서비스
- Health Check: 직접 트래픽을 발생시켜 인스턴스가 살아있는지 체크
- Autoscaling과 연동 가능
- 여러 가용영역에 분산 가능
- 지속적으로 IP주소가 바뀌며 IP 고정 불가능 : 항상 도메인 기반으로 사용

> 총 4가지 종류

- Application Load Balancer
  - 똑똑함
  - 트래픽을 모니터링 하여 라우팅 가능
    - 예 : image.sample.com -> 이미지 서버로, web.sample.com -> 웹 서버로 트래픽 분산
      - 도메인을 읽을 수 있다는 것.
- Network Load Balancer
  - 빠름
  - TCP 기반 빠른 트래픽 분산
  - Elastic IP 할당 가능
- Classic Load Balancer
  - 옛날 것
  - 이전에 서용되선 타입으로 현재는 잘 사용하지 않음.
- Gateway Load Balancer
  - 먼저 트래픽 체크
  - 가상 어플라이언스 배포, 확장 관리를 위한 서비스
    - 네트워크 어플라이언스 : 방화벽, 트래픽 분석, 캐싱, 인증, 로깅 등 '검사'를 먼저 하는 느낌.
  - 일반적인 로드밸런서와는 느낌이 다름.

---

## 대상 그룹

- ALB가 라우팅 할 대상의 집합
- 구성

  - 3+1 가지 종류
    - Instance
    - IP
    - Lambda
    - ALB(또다른 ALB)

- 프로토콜(HTTP,HTTPS등)
- 기타 설정
  - 트래픽 분산 알고리즘, 고정 세션 등
