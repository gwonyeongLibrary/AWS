# 스케일링

## Virtical Scale

cpu 1, memory 1GB => cpu 30, memory: 16GB

- 위와 같은 경우 성능이 좋아짐.
- 그런데 비용은 성능 차이에 비례하지 않음.
  - 성능이 2배 좋아지면 비용도 2배가 증가하는게 아닌 2배 이상 증가한다는 것.

## Horizontal Scale

cpu 1, memory 1GB의 수를 늘려서 성능을 올리는 것.

- 현실적으로 가능한 방안.
  - 성능을 100배 올리겠다고 Virtical Scale에서 cpu 가 100배 좋은 것을 쓰기는 기술적으로 어려우니까.

스캐일링은 기본적으로 `좋은 것을 적게가 아니라 성능이 낮은 것을 여러개` 쓴다고 생각해야함.

이런 스캐일링을 자동으로 해주는 것이 Autoscaling

# AWS Auto Scaling

- 목표
  - 정확한 수의 EC2 인스턴스를 보유하도록 보장
    - 그룹의 최소 인스턴스 숫자 및 최대 인스턴스 숫자
      - 최소 숫자 이하로 내려가지 않도록 인스턴스 숫자를 유지(인스턴스 추가\_
      - 최대 숫자 이상 늘어나지 않도록 인스턴스 숫자 유지(인스턴스 삭제)
    - 다양한 스케일링 정책 적용 가능
      - 예: CPU의 부하에 따라 인스턴스 크기를 늘리기
  - 가용 영역에 인스턴스가 골고루 분산될 수 있도록 인스턴스 분배

> 시작 구성, 시작 템플릿 : 무엇을 실행시킬 것인가?

- EC2의 타입, 사이즈
- AMI
- 보안 그룹, Key, IAM
- 유저 데이터

> 모니터링 : 언제 실행시킬 것인가? + 상태 확인

- 예: CPU 점유율이 일정 %을 넘어섰을 때 추가 실행 등 , CPU하나가 죽었다던가 등
- CloudWatch(and/or) ELB(로드밸런서)와 연계

> 설정 : 얼마나, 어떻게 실행시킬 것인가?

- 최대/ 최소/ 원하는 인스턴스 숫자
- ELB와 연동 등

---

## 적용 방법

1. ec2에서 템플릿 생성
   (ec2 템플릿)

인스턴스의 시작 템플릿에서 생성 가능

2. 사진 하단의 Auto Scaling 그룹
